<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Curiosità sugli animali</title>

        <link rel="canonical" href="https://getbootstrap.com/docs/5.2/examples/product/">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
        <link href="../assets/dist/css/bootstrap.min.css" rel="stylesheet">
        <!-- Custom styles for this template -->
        <link href="pages/css/curiositaAnimaliStyle.css" rel="stylesheet">
        <link href="pages/css/homeStyle.css" rel="stylesheet">
    </head>

    <body>
        <div class="row" style="background-color: rgba(0, 0, 0, .85);"> 
            <div class="col-4"></div>
            <div class="col-4" style=" text-align: center;"> 
            <img src="images/animalhouse.png" alt="" style="height: 100px; text-align: center;">
            </div>
        </div>
    
        <header class="site-header sticky-top py-1">
            <nav class="container d-flex flex-column flex-md-row" style="justify-content: space-evenly;">
            <a class="py-2 d-none d-md-inline-block" href="homepage.html">Home</a>
            <a class="py-2 d-none d-md-inline-block" href="game.html">Giochi</a>
            <a class="py-2 d-none d-md-inline-block" href="login.html">Login</a>
            </nav>
        </header>

        <main>

            <h1>Vuoi scoprire curiosità sugli animali?</h1>
            <h1>Premi il pulsante e impara con noi!</h1>
            <input type="button" value="Cliccami!" onclick="sendRequest()"/>

                <div id="container"></div>   

                <div id="immagine"></div>

        </main>
        
        <footer>
            <div class="row">
              <div class="col-6 col-md">
                <ul class="list text-small">
                  <h5>Pagine</h5>
                  <li><a class="link-secondary" href="homepage.html">Homepage</a></li>
                  <li><a class="link-secondary" href="game.html">Giochi</a></li>
                  <li><a class="link-secondary" href="#">Scopri chi siamo</a></li>
                </ul>
              </div>
              <div class="col-6 col-md">
                <ul class="list text-small">
                  <h5>Utente</h5>
                  <li><a class="link-secondary" href="login.html">Login</a></li>
                  <li><a class="link-secondary" href="register.html">Registrazione</a></li>
                </ul>
              </div>
            </div>
          </footer> 
    </body>
</html>

<script>

function sendRequest() {
    let request = new XMLHttpRequest();
    request.open("GET", "https://zoo-animal-api.herokuapp.com/animals/rand/");
    request.send();
    request.onload = () => {
        if (request.status == 200) {
            var animaliJSON = JSON.parse(request.response);
            mostraInfo(animaliJSON);
            console.log(animaliJSON);
        } else {
            //errore
            console.log(`error ${request.status} ${request.statusText}`);
        }
    }
}

function mostraInfo(animaliJSON) {
    var arrayLength = animaliJSON.length;
    var container = document.getElementById("container");
    var imm = document.getElementById("immagine");

    container.innerHTML = "";
    imm.innerHTML = "";
    
    var h3 = document.createElement("h3");
    var h4 = document.createElement("h4");
    var p2 = document.createElement("p");
    var p3 = document.createElement("p");
    var p4 = document.createElement("p");
    var p5 = document.createElement("p");
    var p7 = document.createElement("p");
    var p8 = document.createElement("p");
    var p9 = document.createElement("p");
    var p10 = document.createElement("p");
    var p11 = document.createElement("p");
    var p12 = document.createElement("p");
    var immagine = document.createElement("img");

    h3.innerHTML = "Animale: " + animaliJSON.name;
    h4.innerHTML = "Nome in latino: " + animaliJSON.latin_name;
    p2.innerHTML = "Classe di vertebrati: " + animaliJSON.animal_type;
    p3.innerHTML = "Ora attiva: " + animaliJSON.active_time;
    p4.innerHTML = "Lunghezza min-max: " + animaliJSON.length_min + " - " + animaliJSON.length_max + "cm";
    p5.innerHTML = "Peso min-max: " + animaliJSON.weight_min + " - " + animaliJSON.weight_max + "kg";
    p8.innerHTML = "Durata di vita: " + animaliJSON.lifespan + " anni";
    p9.innerHTML = "Habitat: " + animaliJSON.habitat;
    p10.innerHTML = "Di cosa si ciba: " + animaliJSON.diet;
    p11.innerHTML = "Dove possiamo trovarlo? " + animaliJSON.geo_range;
    immagine.src = animaliJSON.image_link;

    container.appendChild(h3);
    container.appendChild(h4);
    container.appendChild(p2);
    container.appendChild(p3);
    container.appendChild(p4);
    container.appendChild(p5);
    container.appendChild(p7);
    container.appendChild(p8);
    container.appendChild(p9);
    container.appendChild(p10);
    container.appendChild(p11);

    imm.appendChild(immagine);

}
</script>